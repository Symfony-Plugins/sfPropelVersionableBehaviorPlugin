<?xml version="1.0" encoding="utf-8"?>

<!-- 
  This file is part of the sfPropelVersionableBehaviorPlugin package.
  
  (c) 2007 Tristan Rivoallan <tristan@rivoallan.net>
  
  For the full copyright and license information, please view the LICENSE
  file that was distributed with this source code.
-->

<database name="default" defaultIdMethod="native" package="plugins.sfPropelVersionableBehaviorPlugin.lib.model">
	<table name="resource_version">
		<column name="id" type="INTEGER" size="11" required="true" primaryKey="true" autoIncrement="true" />
		<column name="number" type="INTEGER" size="11" required="true" primaryKey="true" />
		<column name="resource_uuid" type="CHAR" size="36" required="true" />
		<column name="resource_name" type="VARCHAR" size="255" required="true" />
        <foreign-key foreignTable="Article" name="has_versions" onDelete="cascade">
            <reference local="resource_uuid" foreign="uuid"/>
        </foreign-key>
		<index name="resource_uuid_FKIndex1">
			<index-column name="resource_uuid" />
		</index>
	</table>
	<table name="resource_attribute_version">
		<column name="id" type="INTEGER" size="11" required="true" primaryKey="true" autoIncrement="true" />
		<column name="resource_version_id" type="INTEGER" size="11" required="true" />
		<column name="attribute_name" type="VARCHAR" size="255" required="true" />
		<column name="attribute_value" type="LONGVARCHAR" />
		<index name="resource_attribute_version_FKIndex1">
			<index-column name="resource_version_id" />
		</index>
	    <foreign-key foreignTable="resource_version" name="has_attributes" onDelete="cascade">
    	  <reference local="resource_version_id" foreign="id"/>
   	    </foreign-key>
	</table>
</database>